#!/usr/bin/env ruby

$: << "lib"
require 'dns-checker'

zone = ARGV.first
zone = zone + "." unless zone.end_with? "."

cache = DNSChecker::ResolvCache.new(
  DNSChecker::ResolvCacheFetcher.new,
  DNSChecker::ResolvCacheStore.new("var/cache")
)

servers = DNSChecker::RootServers::SERVER_IPV4

DNSChecker::ZoneWalker.new(cache, servers).walk(zone)
